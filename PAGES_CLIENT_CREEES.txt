â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… PAGES CLIENT CRÃ‰Ã‰ES - SYSTÃˆME DE PAIEMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Date: 27 janvier 2025
Statut: âœ… Phase 1 terminÃ©e

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ FICHIERS CRÃ‰Ã‰S
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. src/components/client/DevisDetailCard.tsx
   â†’ Composant rÃ©utilisable pour afficher un devis
   â†’ Affiche les montants, conditions de paiement, acompte/solde
   â†’ Badges de statut
   â†’ Alertes de sÃ©curitÃ©

2. src/pages/dashboard/client/AccepterDevisPage.tsx
   â†’ Page pour accepter un devis
   â†’ Route: /dashboard/client/devis/:devisId/accepter
   â†’ Affichage dÃ©taillÃ© du devis
   â†’ Checkboxes pour accepter les conditions
   â†’ Bouton d'acceptation
   â†’ Redirection vers la signature du contrat

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¨ FONCTIONNALITÃ‰S
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DevisDetailCard:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ En-tÃªte avec numÃ©ro de devis et statut
âœ“ Date de crÃ©ation et date d'expiration
âœ“ Liste des items du devis (si disponible)
âœ“ Montants HT, TVA, TTC
âœ“ Section paiement sÃ©curisÃ© KaziPro:
  - Acompte (montant et pourcentage)
  - Solde (montant et pourcentage)
  - Commission KaziPro
âœ“ Alertes de sÃ©curitÃ©
âœ“ Notes du devis

AccepterDevisPage:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ Bouton retour
âœ“ Affichage du nom du prestataire
âœ“ Utilisation du composant DevisDetailCard
âœ“ 2 checkboxes d'acceptation:
  - Conditions gÃ©nÃ©rales
  - Conditions de paiement
âœ“ Alert de sÃ©curitÃ© (paiement protÃ©gÃ©)
âœ“ Bouton "Accepter et continuer"
âœ“ Mise Ã  jour du statut du devis
âœ“ Redirection vers la signature du contrat

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”— ROUTES AJOUTÃ‰ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/dashboard/client/devis/:devisId/accepter
â†’ Page d'acceptation du devis
â†’ Protected route (authentification requise)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ FLUX UTILISATEUR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Client reÃ§oit un devis d'un prestataire
2. Client clique sur "Voir le devis"
3. Client est redirigÃ© vers /dashboard/client/devis/:devisId/accepter
4. Client voit:
   - DÃ©tails du devis
   - Montants (HT, TVA, TTC)
   - Conditions de paiement (acompte/solde)
   - Alertes de sÃ©curitÃ©
5. Client coche les 2 checkboxes
6. Client clique sur "Accepter et continuer"
7. Statut du devis passe Ã  "accepte"
8. Client est redirigÃ© vers la page de signature du contrat

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š CALCULS AUTOMATIQUES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Actuellement (version simple):
âœ“ Acompte: 30% du montant TTC
âœ“ Solde: 70% du montant TTC

Ã€ amÃ©liorer (prochaine Ã©tape):
â†’ RÃ©cupÃ©rer la config du prestataire
â†’ Calculer les commissions selon la config
â†’ Appliquer le pourcentage d'acompte personnalisÃ©
â†’ IntÃ©grer les frais de dÃ©placement

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ PROCHAINES Ã‰TAPES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Phase 2: Signature du contrat
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Page de signature du contrat
   â†’ /dashboard/client/contrat/:devisId
   â†’ Affichage du contrat gÃ©nÃ©rÃ©
   â†’ Zone de signature Ã©lectronique
   â†’ Bouton "Signer le contrat"

2. GÃ©nÃ©ration du contrat
   â†’ Trigger SQL ou fonction
   â†’ GÃ©nÃ©ration du PDF
   â†’ Stockage dans storage

Phase 3: Paiement
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Page de paiement de l'acompte
   â†’ /dashboard/client/paiement/:contratId/acompte
   â†’ Choix de la mÃ©thode (M-Pesa, Airtel, etc.)
   â†’ Formulaire de paiement
   â†’ Confirmation

2. Page de paiement du solde
   â†’ /dashboard/client/paiement/:contratId/solde
   â†’ AprÃ¨s validation des travaux
   â†’ MÃªme processus que l'acompte

Phase 4: Validation des travaux
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Page de validation
   â†’ /dashboard/client/mission/:missionId/valider
   â†’ Photos des travaux
   â†’ Formulaire de validation
   â†’ Bouton "Valider les travaux"
   â†’ DÃ©clenchement du paiement du solde

Phase 5: Litiges
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Page de dÃ©claration de litige
   â†’ /dashboard/client/mission/:missionId/litige
   â†’ Formulaire de litige
   â†’ Upload de preuves
   â†’ Soumission

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” INTÃ‰GRATION AVEC LE SYSTÃˆME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Tables utilisÃ©es:
âœ“ devis_pro (lecture/Ã©criture)
âœ“ prestataires (lecture)

Tables Ã  utiliser (prochaines Ã©tapes):
â†’ contrats (crÃ©ation)
â†’ paiements (crÃ©ation)
â†’ missions (lecture/Ã©criture)
â†’ litiges (crÃ©ation)

Hooks Ã  crÃ©er:
â†’ useContrat(contratId)
â†’ usePaiement(paiementId)
â†’ useCreatePaiement()
â†’ useValidateMission()

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… VÃ‰RIFICATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Pas d'erreurs TypeScript
âœ“ Imports corrects
âœ“ Routes ajoutÃ©es
âœ“ Composants valides
âœ“ UI responsive
âœ“ Loading states
âœ“ Error handling
âœ“ Toast notifications

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ COMMENT TESTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Connecte-toi en tant que client

2. Va sur: /dashboard/client/devis/[ID_DEVIS]/accepter
   (Remplace [ID_DEVIS] par un vrai ID de devis)

3. Tu devrais voir:
   - Le dÃ©tail du devis
   - Les montants
   - Les conditions de paiement
   - 2 checkboxes
   - Bouton "Accepter et continuer"

4. Coche les 2 checkboxes

5. Clique sur "Accepter et continuer"

6. Le statut du devis passe Ã  "accepte"

7. Tu es redirigÃ© vers /dashboard/client/contrat/[ID_DEVIS]
   (Page Ã  crÃ©er dans la phase 2)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ NOTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

- Les calculs de commission sont simplifiÃ©s pour l'instant
- La gÃ©nÃ©ration du contrat sera faite dans la phase 2
- Le paiement sera intÃ©grÃ© dans la phase 3
- Le design est responsive et mobile-friendly
- Les alertes de sÃ©curitÃ© rassurent le client

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
