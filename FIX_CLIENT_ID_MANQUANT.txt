âœ… PROBLÃˆME CLIENT_ID RÃ‰SOLU
================================

ğŸ” PROBLÃˆME IDENTIFIÃ‰
---------------------

Erreur: "null value in column 'client_id' of relation 'contrats' violates not-null constraint"

Cause: Les anciens devis dans la table `devis` n'ont pas de colonne `client_id`, 
mais la table `contrats` exige cette valeur (NOT NULL constraint).


âœ… SOLUTION IMPLÃ‰MENTÃ‰E
-----------------------

Dans SignerContratPage.tsx, fonction createContrat() :

1. RÃ©cupÃ©ration du client_id depuis le devis (si disponible)
2. Si absent, rÃ©cupÃ©ration depuis le profil client de l'utilisateur connectÃ©
3. VÃ©rification finale avant insertion

Code ajoutÃ© :
```typescript
// RÃ©cupÃ©rer le client_id depuis le profil de l'utilisateur connectÃ©
let clientId = devisData.client_id;

if (!clientId) {
  const { data: clientData } = await supabase
    .from('clients')
    .select('id, full_name, email, city')
    .eq('user_id', user?.id)
    .maybeSingle();
  
  clientId = clientData?.id;
}

// Si toujours pas de client_id, on ne peut pas crÃ©er le contrat
if (!clientId) {
  throw new Error('Impossible de dÃ©terminer le client_id');
}
```


ğŸ¯ RÃ‰SULTAT
-----------

âœ“ Les contrats peuvent maintenant Ãªtre crÃ©Ã©s mÃªme pour les anciens devis
âœ“ Le client_id est toujours prÃ©sent
âœ“ Pas d'erreur de contrainte NOT NULL
âœ“ CompatibilitÃ© avec les deux tables (devis et devis_pro)


ğŸ“ FICHIER MODIFIÃ‰
------------------

src/pages/dashboard/client/SignerContratPage.tsx
- Fonction createContrat() enrichie avec rÃ©cupÃ©ration du client_id
